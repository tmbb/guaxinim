<html>
  <head>
    <meta charset="UTF-8">
    <!-- Licensed under the Apache 2.0 License -->
    <link rel="stylesheet" type="text/css" href="../../_static/fonts/open-sans/stylesheet.css" />
    <!-- Licensed under the SIL Open Font License -->
    <link rel="stylesheet" type="text/css" href="../../_static/fonts/source-serif-pro/source-serif-pro.css" />
    <!-- Guzzler docs -->
    <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" />
    <!--
      <link rel="stylesheet" type="text/css" href="../../_static/css/bootstrap.min.css" />
    -->
    <link rel="stylesheet" type="text/css" href="../../_static/css/bootstrap-theme.min.css" />
    <!-- Guaxinim -->
    <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css" />

  </head>
  <body>
    <div class="container-wrapper">
      <div id="left-column">
        <div class="sphinxsidebar">
  <a href="#" class="text-logo">
    Guaxinim
  </a>
  <div class="sidebar-block">
    <div class="sidebar-wrapper">
      <h2>Table Of Contents</h2>
    </div>
    <div class="sidebar-toc">
      <ul class="current">
        
        
        <li class="toctree-l1">
          <a class="reference internal" href="..">
            <span class="glyphicon glyphicon-level-up"></span>
            &nbsp;
            <span class="sidebar-toc-level-up">../</span></a></li>
        
        
        
        
        
        <li class="toctree-l1">
          <a class="reference internal" href="path.ex.html">
            <span class="glyphicon glyphicon-file"></span>
            &nbsp;
            <span class="sidebar-toc-file">path.ex</span></a></li>
        
        <li class="toctree-l1">
          <a class="reference internal" href="tokens.ex.html">
            <span class="glyphicon glyphicon-file"></span>
            &nbsp;
            <span class="sidebar-toc-file">tokens.ex</span></a></li>
        
        <li class="toctree-l1">
          <a class="reference internal" href="url.ex.html">
            <span class="glyphicon glyphicon-file"></span>
            &nbsp;
            <span class="sidebar-toc-file">url.ex</span></a></li>
        
      </ul>
    </div>
  </div>
</div>
      </div>

      <div id="right-column">
        <div class="document clearer body">
          <div class="guaxinim-codeblock">
  <table>
    <tbody>
      <tr>
        <td>
          <div class="line-anchors">
            <pre><a id="L1"></a><a href="#L1">  1</a>
<a id="L2"></a><a href="#L2">  2</a>
<a id="L3"></a><a href="#L3">  3</a>
<a id="L4"></a><a href="#L4">  4</a>
<a id="L5"></a><a href="#L5">  5</a>
<a id="L6"></a><a href="#L6">  6</a>
<a id="L7"></a><a href="#L7">  7</a>
<a id="L8"></a><a href="#L8">  8</a>
<a id="L9"></a><a href="#L9">  9</a>
<a id="L10"></a><a href="#L10"> 10</a>
<a id="L11"></a><a href="#L11"> 11</a>
<a id="L12"></a><a href="#L12"> 12</a>
<a id="L13"></a><a href="#L13"> 13</a>
<a id="L14"></a><a href="#L14"> 14</a>
<a id="L15"></a><a href="#L15"> 15</a>
<a id="L16"></a><a href="#L16"> 16</a>
<a id="L17"></a><a href="#L17"> 17</a>
<a id="L18"></a><a href="#L18"> 18</a>
<a id="L19"></a><a href="#L19"> 19</a>
<a id="L20"></a><a href="#L20"> 20</a>
<a id="L21"></a><a href="#L21"> 21</a>
<a id="L22"></a><a href="#L22"> 22</a>
<a id="L23"></a><a href="#L23"> 23</a>
<a id="L24"></a><a href="#L24"> 24</a>
<a id="L25"></a><a href="#L25"> 25</a>
<a id="L26"></a><a href="#L26"> 26</a>
<a id="L27"></a><a href="#L27"> 27</a>
<a id="L28"></a><a href="#L28"> 28</a>
<a id="L29"></a><a href="#L29"> 29</a>
<a id="L30"></a><a href="#L30"> 30</a>
<a id="L31"></a><a href="#L31"> 31</a>
<a id="L32"></a><a href="#L32"> 32</a>
<a id="L33"></a><a href="#L33"> 33</a>
<a id="L34"></a><a href="#L34"> 34</a>
<a id="L35"></a><a href="#L35"> 35</a>
<a id="L36"></a><a href="#L36"> 36</a>
<a id="L37"></a><a href="#L37"> 37</a>
<a id="L38"></a><a href="#L38"> 38</a>
<a id="L39"></a><a href="#L39"> 39</a>
<a id="L40"></a><a href="#L40"> 40</a>
<a id="L41"></a><a href="#L41"> 41</a>
<a id="L42"></a><a href="#L42"> 42</a>
<a id="L43"></a><a href="#L43"> 43</a>
<a id="L44"></a><a href="#L44"> 44</a>
<a id="L45"></a><a href="#L45"> 45</a>
<a id="L46"></a><a href="#L46"> 46</a>
<a id="L47"></a><a href="#L47"> 47</a>
<a id="L48"></a><a href="#L48"> 48</a>
<a id="L49"></a><a href="#L49"> 49</a>
<a id="L50"></a><a href="#L50"> 50</a>
<a id="L51"></a><a href="#L51"> 51</a>
<a id="L52"></a><a href="#L52"> 52</a>
<a id="L53"></a><a href="#L53"> 53</a>
<a id="L54"></a><a href="#L54"> 54</a>
<a id="L55"></a><a href="#L55"> 55</a>
<a id="L56"></a><a href="#L56"> 56</a>
<a id="L57"></a><a href="#L57"> 57</a>
<a id="L58"></a><a href="#L58"> 58</a>
<a id="L59"></a><a href="#L59"> 59</a>
<a id="L60"></a><a href="#L60"> 60</a>
<a id="L61"></a><a href="#L61"> 61</a>
<a id="L62"></a><a href="#L62"> 62</a>
<a id="L63"></a><a href="#L63"> 63</a>
<a id="L64"></a><a href="#L64"> 64</a>
<a id="L65"></a><a href="#L65"> 65</a>
<a id="L66"></a><a href="#L66"> 66</a>
<a id="L67"></a><a href="#L67"> 67</a>
<a id="L68"></a><a href="#L68"> 68</a>
<a id="L69"></a><a href="#L69"> 69</a>
<a id="L70"></a><a href="#L70"> 70</a>
<a id="L71"></a><a href="#L71"> 71</a>
<a id="L72"></a><a href="#L72"> 72</a>
<a id="L73"></a><a href="#L73"> 73</a>
<a id="L74"></a><a href="#L74"> 74</a>
<a id="L75"></a><a href="#L75"> 75</a>
<a id="L76"></a><a href="#L76"> 76</a>
<a id="L77"></a><a href="#L77"> 77</a>
<a id="L78"></a><a href="#L78"> 78</a>
<a id="L79"></a><a href="#L79"> 79</a>
<a id="L80"></a><a href="#L80"> 80</a>
<a id="L81"></a><a href="#L81"> 81</a>
<a id="L82"></a><a href="#L82"> 82</a>
<a id="L83"></a><a href="#L83"> 83</a>
<a id="L84"></a><a href="#L84"> 84</a>
<a id="L85"></a><a href="#L85"> 85</a>
<a id="L86"></a><a href="#L86"> 86</a>
<a id="L87"></a><a href="#L87"> 87</a>
<a id="L88"></a><a href="#L88"> 88</a>
<a id="L89"></a><a href="#L89"> 89</a>
<a id="L90"></a><a href="#L90"> 90</a>
<a id="L91"></a><a href="#L91"> 91</a>
<a id="L92"></a><a href="#L92"> 92</a>
<a id="L93"></a><a href="#L93"> 93</a>
<a id="L94"></a><a href="#L94"> 94</a>
<a id="L95"></a><a href="#L95"> 95</a>
<a id="L96"></a><a href="#L96"> 96</a>
<a id="L97"></a><a href="#L97"> 97</a>
<a id="L98"></a><a href="#L98"> 98</a>
<a id="L99"></a><a href="#L99"> 99</a>
<a id="L100"></a><a href="#L100">100</a>
<a id="L101"></a><a href="#L101">101</a>
<a id="L102"></a><a href="#L102">102</a>
<a id="L103"></a><a href="#L103">103</a>
<a id="L104"></a><a href="#L104">104</a>
<a id="L105"></a><a href="#L105">105</a></pre>
          </div>
        </td>
        <td class="right-side guaxinim-code">
          <div class="nohighlight makeup code">
            <pre><span class="kd">defmodule</span><span class="w"> </span><span class="nc">Guaxinim.Utils.Tokens</span><span class="w"> </span><span class="k" data-group-id="704">do</span><span class="w"></span>
<span class="w">  </span><span class="kn">alias</span><span class="w"> </span><span class="nc">Guaxinim.Database.FunctionCall</span><span class="w"></span>
<span class="w">  </span><span class="kn">alias</span><span class="w"> </span><span class="nc">Makeup.Formatters.HTML.HTMLFormatter</span><span class="w"></span>
<span class="w">  </span><span class="kn">require</span><span class="w"> </span><span class="nc">EEx</span><span class="w"></span>
<span class="w"></span>
<span class="w">  </span><span class="kn">alias</span><span class="w"> </span><span class="nc">Guaxinim.Utils.URL</span><span class="w"></span>
<span class="w"></span>
<span class="w">  </span><span class="kd">def</span><span class="w"> </span><span class="nf">split_into_lines</span><span class="p" data-group-id="596">(</span><span class="n">tokens</span><span class="p" data-group-id="596">)</span><span class="w"> </span><span class="k" data-group-id="630">do</span><span class="w"></span>
<span class="w">    </span><span class="p" data-group-id="597">{</span><span class="n">lines</span><span class="p">,</span><span class="w"> </span><span class="n">last_line</span><span class="p" data-group-id="597">}</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w">      </span><span class="nc">Enum</span><span class="o">.</span><span class="n"><a class="guaxinim-source-link" href="https://hexdocs.pm/elixir/Enum.html#reduce/3">reduce</a></span><span class="w"> </span><span class="n">tokens</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="600">{</span><span class="p" data-group-id="598">[]</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="599">[]</span><span class="p" data-group-id="600">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="627">(</span><span class="k" data-group-id="626">fn</span><span class="w"> </span><span class="p" data-group-id="601">{</span><span class="n">ttype</span><span class="p">,</span><span class="w"> </span><span class="n">meta</span><span class="p">,</span><span class="w"> </span><span class="n">text</span><span class="p" data-group-id="601">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tok</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="602">{</span><span class="n">lines</span><span class="p">,</span><span class="w"> </span><span class="n">line</span><span class="p" data-group-id="602">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="nc">String</span><span class="o">.</span><span class="n"><a class="guaxinim-source-link" href="https://hexdocs.pm/elixir/String.html#split/2">split</a></span><span class="p" data-group-id="603">(</span><span class="n">text</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p" data-group-id="603">)</span><span class="w"> </span><span class="k" data-group-id="625">do</span><span class="w"></span>
<span class="w">          </span><span class="p" data-group-id="604">[</span><span class="bp">_</span><span class="p" data-group-id="604">]</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p" data-group-id="606">{</span><span class="n">lines</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="605">[</span><span class="n">tok</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">line</span><span class="p" data-group-id="605">]</span><span class="p" data-group-id="606">}</span><span class="w"></span>
<span class="w">          </span><span class="p" data-group-id="607">[</span><span class="n">part</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">parts</span><span class="p" data-group-id="607">]</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">            </span><span class="n">first_line</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="609">[</span><span class="p" data-group-id="608">{</span><span class="n">ttype</span><span class="p">,</span><span class="w"> </span><span class="n">meta</span><span class="p">,</span><span class="w"> </span><span class="n">part</span><span class="p" data-group-id="608">}</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">line</span><span class="p" data-group-id="609">]</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="ss">:lists</span><span class="o">.</span><span class="n"><a class="guaxinim-source-link" href="http://erlang.org/doc/man/lists.html#reverse-1">reverse</a></span><span class="w"></span>
<span class="w"></span>
<span class="w">            </span><span class="n">all_but_last_line</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w">              </span><span class="n">parts</span><span class="w"></span>
<span class="w">              </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n"><a class="guaxinim-source-link" href="https://hexdocs.pm/elixir/Enum.html#slice/2">slice</a></span><span class="p" data-group-id="610">(</span><span class="mi">0</span><span class="o">..-</span><span class="mi">2</span><span class="p" data-group-id="610">)</span><span class="w"></span>
<span class="w">              </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n"><a class="guaxinim-source-link" href="https://hexdocs.pm/elixir/Enum.html#map/2">map</a></span><span class="p" data-group-id="614">(</span><span class="k" data-group-id="613">fn</span><span class="w"> </span><span class="n">tok_text</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p" data-group-id="612">[</span><span class="p" data-group-id="611">{</span><span class="n">ttype</span><span class="p">,</span><span class="w"> </span><span class="n">meta</span><span class="p">,</span><span class="w"> </span><span class="n">tok_text</span><span class="p" data-group-id="611">}</span><span class="p" data-group-id="612">]</span><span class="w"> </span><span class="k" data-group-id="613">end</span><span class="p" data-group-id="614">)</span><span class="w"></span>
<span class="w">              </span><span class="o">|&gt;</span><span class="w"> </span><span class="ss">:lists</span><span class="o">.</span><span class="n"><a class="guaxinim-source-link" href="http://erlang.org/doc/man/lists.html#reverse-1">reverse</a></span><span class="w"></span>
<span class="w"></span>
<span class="w">            </span><span class="n">last_line_text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n"><a class="guaxinim-source-link" href="https://hexdocs.pm/elixir/Enum.html#at/2">at</a></span><span class="p" data-group-id="615">(</span><span class="n">parts</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span><span class="p" data-group-id="615">)</span><span class="w"></span>
<span class="w">            </span><span class="n">last_line</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="618">[</span><span class="p" data-group-id="617">{</span><span class="n">ttype</span><span class="p">,</span><span class="w"> </span><span class="n">meta</span><span class="p">,</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n"><a class="guaxinim-source-link" href="https://hexdocs.pm/elixir/Enum.html#at/2">at</a></span><span class="p" data-group-id="616">(</span><span class="n">parts</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span><span class="p" data-group-id="616">)</span><span class="p" data-group-id="617">}</span><span class="p" data-group-id="618">]</span><span class="w"></span>
<span class="w"></span>
<span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="n">last_line_text</span><span class="w"> </span><span class="k" data-group-id="624">do</span><span class="w"></span>
<span class="w">              </span><span class="s2">&quot;&quot;</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p" data-group-id="621">{</span><span class="n">all_but_last_line</span><span class="w"> </span><span class="o">++</span><span class="w"> </span><span class="p" data-group-id="619">[</span><span class="n">first_line</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">lines</span><span class="p" data-group-id="619">]</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="620">[]</span><span class="p" data-group-id="621">}</span><span class="w"></span>
<span class="w">              </span><span class="bp">_</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p" data-group-id="623">{</span><span class="n">all_but_last_line</span><span class="w"> </span><span class="o">++</span><span class="w"> </span><span class="p" data-group-id="622">[</span><span class="n">first_line</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">lines</span><span class="p" data-group-id="622">]</span><span class="p">,</span><span class="w"> </span><span class="n">last_line</span><span class="p" data-group-id="623">}</span><span class="w"></span>
<span class="w">            </span><span class="k" data-group-id="624">end</span><span class="w"></span>
<span class="w"></span>
<span class="w">        </span><span class="k" data-group-id="625">end</span><span class="w"></span>
<span class="w">      </span><span class="k" data-group-id="626">end</span><span class="p" data-group-id="627">)</span><span class="w"></span>
<span class="w"></span>
<span class="w">    </span><span class="p" data-group-id="628">[</span><span class="n">last_line</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">lines</span><span class="p" data-group-id="628">]</span><span class="w"></span>
<span class="w">    </span><span class="o">|&gt;</span><span class="w"> </span><span class="ss">:lists</span><span class="o">.</span><span class="n"><a class="guaxinim-source-link" href="http://erlang.org/doc/man/lists.html#reverse-1">reverse</a></span><span class="w"></span>
<span class="w">    </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n"><a class="guaxinim-source-link" href="https://hexdocs.pm/elixir/Enum.html#with_index/2">with_index</a></span><span class="p" data-group-id="629">(</span><span class="mi">1</span><span class="p" data-group-id="629">)</span><span class="w"></span>
<span class="w">  </span><span class="k" data-group-id="630">end</span><span class="w"></span>
<span class="w"></span>
<span class="w">  </span><span class="kd">defp</span><span class="w"> </span><span class="nf">escape</span><span class="p" data-group-id="631">(</span><span class="n">string</span><span class="p" data-group-id="631">)</span><span class="w"> </span><span class="k" data-group-id="640">do</span><span class="w"></span>
<span class="w">    </span><span class="n">escape_map</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="636">[</span><span class="p" data-group-id="632">{</span><span class="s2">&quot;&amp;&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;&amp;amp;&quot;</span><span class="p" data-group-id="632">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="633">{</span><span class="s2">&quot;&lt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;&amp;lt;&quot;</span><span class="p" data-group-id="633">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="634">{</span><span class="s2">&quot;&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;&amp;gt;&quot;</span><span class="p" data-group-id="634">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="635">{</span><span class="s">~S(&quot;)</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;&amp;quot;&quot;</span><span class="p" data-group-id="635">}</span><span class="p" data-group-id="636">]</span><span class="w"></span>
<span class="w">    </span><span class="nc">Enum</span><span class="o">.</span><span class="n"><a class="guaxinim-source-link" href="https://hexdocs.pm/elixir/Enum.html#reduce/3">reduce</a></span><span class="w"> </span><span class="n">escape_map</span><span class="p">,</span><span class="w"> </span><span class="n">string</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="639">fn</span><span class="w"> </span><span class="p" data-group-id="637">{</span><span class="n">pattern</span><span class="p">,</span><span class="w"> </span><span class="n">escape</span><span class="p" data-group-id="637">}</span><span class="p">,</span><span class="w"> </span><span class="n">acc</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">      </span><span class="nc">String</span><span class="o">.</span><span class="n"><a class="guaxinim-source-link" href="https://hexdocs.pm/elixir/String.html#replace/3">replace</a></span><span class="p" data-group-id="638">(</span><span class="n">acc</span><span class="p">,</span><span class="w"> </span><span class="n">pattern</span><span class="p">,</span><span class="w"> </span><span class="n">escape</span><span class="p" data-group-id="638">)</span><span class="w"></span>
<span class="w">    </span><span class="k" data-group-id="639">end</span><span class="w"></span>
<span class="w">  </span><span class="k" data-group-id="640">end</span><span class="w"></span>
<span class="w"></span>
<span class="w">  </span><span class="nc">EEx</span><span class="o">.</span><span class="n"><a class="guaxinim-source-link" href="https://hexdocs.pm/elixir/EEx.html#function_from_string/4">function_from_string</a></span><span class="p" data-group-id="642">(</span><span class="ss">:defp</span><span class="p">,</span><span class="w"> </span><span class="ss">:render_token</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">  &lt;span</span><span class="se">\</span>
<span class="s2">  &lt;%= if css_class do %&gt; class=&quot;&lt;%= css_class %&gt;&quot;&lt;% end %&gt;</span><span class="se">\</span>
<span class="s2">  &lt;%= if meta[:group_id] do %&gt; data-group-id=&quot;&lt;%= meta[:group_id] %&gt;&quot;&lt;% end %&gt;</span><span class="se">\</span>
<span class="s2">  &gt;&lt;a class=&quot;guaxinim-source-link&quot; href=&quot;&lt;%= url %&gt;&quot;&gt;&lt;%= escaped_value %&gt;&lt;/a&gt;&lt;/span&gt;</span><span class="se">\</span>
<span class="s2">  &quot;&quot;&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="641">[</span><span class="ss">:escaped_value</span><span class="p">,</span><span class="w"> </span><span class="ss">:css_class</span><span class="p">,</span><span class="w"> </span><span class="ss">:meta</span><span class="p">,</span><span class="w"> </span><span class="ss">:url</span><span class="p" data-group-id="641">]</span><span class="p" data-group-id="642">)</span><span class="w"></span>
<span class="w"></span>
<span class="w">  </span><span class="kd">def</span><span class="w"> </span><span class="nf">format_token_with_link</span><span class="p" data-group-id="644">(</span><span class="p" data-group-id="643">{</span><span class="n">tag</span><span class="p">,</span><span class="w"> </span><span class="n">meta</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="p" data-group-id="643">}</span><span class="p">,</span><span class="w"> </span><span class="n">url</span><span class="p" data-group-id="644">)</span><span class="w"> </span><span class="k" data-group-id="648">do</span><span class="w"></span>
<span class="w">    </span><span class="n">escaped_value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n"><a class="guaxinim-source-link" href="#L38">escape</a></span><span class="p" data-group-id="645">(</span><span class="n">value</span><span class="p" data-group-id="645">)</span><span class="w"></span>
<span class="w">    </span><span class="n">css_class</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Makeup.Token.Utils</span><span class="o">.</span><span class="n"><a class="guaxinim-source-link" href="https://hexdocs.pm/makeup/Makeup.Token.Utils.html#css_class_for_token_type/1">css_class_for_token_type</a></span><span class="p" data-group-id="646">(</span><span class="n">tag</span><span class="p" data-group-id="646">)</span><span class="w"></span>
<span class="w">    </span><span class="n"><a class="guaxinim-source-link" href="#L45">render_token</a></span><span class="p" data-group-id="647">(</span><span class="n">escaped_value</span><span class="p">,</span><span class="w"> </span><span class="n">css_class</span><span class="p">,</span><span class="w"> </span><span class="n">meta</span><span class="p">,</span><span class="w"> </span><span class="n">url</span><span class="p" data-group-id="647">)</span><span class="w"></span>
<span class="w">  </span><span class="k" data-group-id="648">end</span><span class="w"></span>
<span class="w"></span>
<span class="w">  </span><span class="kd">def</span><span class="w"> </span><span class="nf">format_token</span><span class="p" data-group-id="651">(</span><span class="n">config</span><span class="p">,</span><span class="w"> </span><span class="n">file</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="650">{</span><span class="p" data-group-id="649">{</span><span class="ss">:name</span><span class="p">,</span><span class="w"> </span><span class="bp">_</span><span class="p">,</span><span class="w"> </span><span class="n">text</span><span class="p" data-group-id="649">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">token</span><span class="p">,</span><span class="w"> </span><span class="n">line_nr</span><span class="p" data-group-id="650">}</span><span class="p" data-group-id="651">)</span><span class="w"> </span><span class="k" data-group-id="662">do</span><span class="w"></span>
<span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="nc">FunctionCall</span><span class="o">.</span><span class="n"><a class="guaxinim-source-link" href="../database.ex.html#L48">lookup_f_file_line!</a></span><span class="p" data-group-id="653">(</span><span class="p" data-group-id="652">{</span><span class="n">text</span><span class="p">,</span><span class="w"> </span><span class="n">file</span><span class="p">,</span><span class="w"> </span><span class="n">line_nr</span><span class="p" data-group-id="652">}</span><span class="p" data-group-id="653">)</span><span class="w"> </span><span class="k" data-group-id="661">do</span><span class="w"></span>
<span class="w">      </span><span class="no">nil</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">HTMLFormatter</span><span class="o">.</span><span class="n"><a class="guaxinim-source-link" href="https://hexdocs.pm/makeup/Makeup.Formatters.HTML.HTMLFormatter.html#format_token/1">format_token</a></span><span class="p" data-group-id="654">(</span><span class="n">token</span><span class="p" data-group-id="654">)</span><span class="w"></span>
<span class="w"></span>
<span class="w">      </span><span class="p" data-group-id="655">%{</span><span class="ss">m</span><span class="p">:</span><span class="w"> </span><span class="n">m</span><span class="p">,</span><span class="w"> </span><span class="ss">f</span><span class="p">:</span><span class="w"> </span><span class="n">f</span><span class="p">,</span><span class="w"> </span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="n">a</span><span class="p" data-group-id="655">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="nc">URL</span><span class="o">.</span><span class="n"><a class="guaxinim-source-link" href="url.ex.html#L37">url_for_mfa</a></span><span class="p" data-group-id="657">(</span><span class="n">config</span><span class="p">,</span><span class="w"> </span><span class="n">file</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="656">{</span><span class="n">m</span><span class="p">,</span><span class="w"> </span><span class="n">f</span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="p" data-group-id="656">}</span><span class="p" data-group-id="657">)</span><span class="w"> </span><span class="k" data-group-id="660">do</span><span class="w"></span>
<span class="w">          </span><span class="no">nil</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">HTMLFormatter</span><span class="o">.</span><span class="n"><a class="guaxinim-source-link" href="https://hexdocs.pm/makeup/Makeup.Formatters.HTML.HTMLFormatter.html#format_token/1">format_token</a></span><span class="p" data-group-id="658">(</span><span class="n">token</span><span class="p" data-group-id="658">)</span><span class="w"></span>
<span class="w">          </span><span class="n">url</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n"><a class="guaxinim-source-link" href="#L52">format_token_with_link</a></span><span class="p" data-group-id="659">(</span><span class="n">token</span><span class="p">,</span><span class="w"> </span><span class="n">url</span><span class="p" data-group-id="659">)</span><span class="w"></span>
<span class="w">        </span><span class="k" data-group-id="660">end</span><span class="w"></span>
<span class="w">    </span><span class="k" data-group-id="661">end</span><span class="w"></span>
<span class="w">  </span><span class="k" data-group-id="662">end</span><span class="w"></span>
<span class="w">  </span><span class="kd">def</span><span class="w"> </span><span class="nf">format_token</span><span class="p" data-group-id="664">(</span><span class="bp">_</span><span class="p">,</span><span class="w"> </span><span class="bp">_</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="663">{</span><span class="n">token</span><span class="p">,</span><span class="w"> </span><span class="bp">_</span><span class="p" data-group-id="663">}</span><span class="p" data-group-id="664">)</span><span class="p">,</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="nc">HTMLFormatter</span><span class="o">.</span><span class="n"><a class="guaxinim-source-link" href="https://hexdocs.pm/makeup/Makeup.Formatters.HTML.HTMLFormatter.html#format_token/1">format_token</a></span><span class="p" data-group-id="665">(</span><span class="n">token</span><span class="p" data-group-id="665">)</span><span class="w"></span>
<span class="w"></span>
<span class="w">  </span><span class="kd">defp</span><span class="w"> </span><span class="nf">line_to_html</span><span class="p" data-group-id="667">(</span><span class="n">config</span><span class="p">,</span><span class="w"> </span><span class="n">file</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="666">{</span><span class="n">tokens</span><span class="p">,</span><span class="w"> </span><span class="n">line_nr</span><span class="p" data-group-id="666">}</span><span class="p" data-group-id="667">)</span><span class="w"> </span><span class="k" data-group-id="673">do</span><span class="w"></span>
<span class="w">    </span><span class="n">tokens</span><span class="w"></span>
<span class="w">    </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n"><a class="guaxinim-source-link" href="https://hexdocs.pm/elixir/Enum.html#map/2">map</a></span><span class="p" data-group-id="671">(</span><span class="k" data-group-id="670">fn</span><span class="w"> </span><span class="n">token</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n"><a class="guaxinim-source-link" href="#L69">format_token</a></span><span class="p" data-group-id="669">(</span><span class="n">config</span><span class="p">,</span><span class="w"> </span><span class="n">file</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="668">{</span><span class="n">token</span><span class="p">,</span><span class="w"> </span><span class="n">line_nr</span><span class="p" data-group-id="668">}</span><span class="p" data-group-id="669">)</span><span class="w"> </span><span class="k" data-group-id="670">end</span><span class="p" data-group-id="671">)</span><span class="w"></span>
<span class="w">    </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n"><a class="guaxinim-source-link" href="https://hexdocs.pm/elixir/Enum.html#join/2">join</a></span><span class="p" data-group-id="672">(</span><span class="s2">&quot;&quot;</span><span class="p" data-group-id="672">)</span><span class="w"></span>
<span class="w">  </span><span class="k" data-group-id="673">end</span><span class="w"></span>
<span class="w"></span>
<span class="w">  </span><span class="kd">defp</span><span class="w"> </span><span class="nf">line_nr_anchor</span><span class="p" data-group-id="674">(</span><span class="n">line_nr</span><span class="p">,</span><span class="w"> </span><span class="n">anchor_padding</span><span class="p">,</span><span class="w"> </span><span class="no">true</span><span class="p" data-group-id="674">)</span><span class="w"> </span><span class="k" data-group-id="685">do</span><span class="w"></span>
<span class="w">    </span><span class="n">text</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w">      </span><span class="n">line_nr</span><span class="w"></span>
<span class="w">      </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Integer</span><span class="o">.</span><span class="n">to_string</span><span class="w"></span>
<span class="w">      </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">String</span><span class="o">.</span><span class="n"><a class="guaxinim-source-link" href="https://hexdocs.pm/elixir/String.html#pad_leading/2">pad_leading</a></span><span class="p" data-group-id="675">(</span><span class="n">anchor_padding</span><span class="p" data-group-id="675">)</span><span class="w"></span>
<span class="w"></span>
<span class="w">    </span><span class="s">~s(&lt;a id=&quot;L</span><span class="si" data-group-id="678">#{</span><span class="n">line_nr</span><span class="si" data-group-id="678">}</span><span class="s">&quot;&gt;&lt;/a&gt;&lt;a href=&quot;#L</span><span class="si" data-group-id="681">#{</span><span class="n">line_nr</span><span class="si" data-group-id="681">}</span><span class="s">&quot;&gt;</span><span class="si" data-group-id="684">#{</span><span class="n">text</span><span class="si" data-group-id="684">}</span><span class="s">&lt;/a&gt;)</span><span class="w"></span>
<span class="w">  </span><span class="k" data-group-id="685">end</span><span class="w"></span>
<span class="w">  </span><span class="kd">defp</span><span class="w"> </span><span class="nf">line_nr_anchor</span><span class="p" data-group-id="686">(</span><span class="n">line_nr</span><span class="p">,</span><span class="w"> </span><span class="bp">_</span><span class="p">,</span><span class="w"> </span><span class="no">false</span><span class="p" data-group-id="686">)</span><span class="w"> </span><span class="k" data-group-id="690">do</span><span class="w"></span>
<span class="w">    </span><span class="s">~s(&lt;a id=&quot;L</span><span class="si" data-group-id="689">#{</span><span class="n">line_nr</span><span class="si" data-group-id="689">}</span><span class="s">&quot;&gt;&lt;/a&gt;)</span><span class="w"></span>
<span class="w">  </span><span class="k" data-group-id="690">end</span><span class="w"></span>
<span class="w"></span>
<span class="w">  </span><span class="kd">def</span><span class="w"> </span><span class="nf">lines_to_html_data</span><span class="p" data-group-id="691">(</span><span class="n">config</span><span class="p">,</span><span class="w"> </span><span class="n">file</span><span class="p">,</span><span class="w"> </span><span class="n">anchor_padding</span><span class="p">,</span><span class="w"> </span><span class="n">token_lines</span><span class="p">,</span><span class="w"> </span><span class="n">line_numbers?</span><span class="w"> </span><span class="o">\\</span><span class="w"> </span><span class="no">true</span><span class="p" data-group-id="691">)</span><span class="w"> </span><span class="k" data-group-id="703">do</span><span class="w"></span>
<span class="w">    </span><span class="n">code</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w">      </span><span class="n">token_lines</span><span class="w"></span>
<span class="w">      </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n"><a class="guaxinim-source-link" href="https://hexdocs.pm/elixir/Enum.html#map/2">map</a></span><span class="p" data-group-id="694">(</span><span class="k" data-group-id="693">fn</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n"><a class="guaxinim-source-link" href="#L71">line_to_html</a></span><span class="p" data-group-id="692">(</span><span class="n">config</span><span class="p">,</span><span class="w"> </span><span class="n">file</span><span class="p">,</span><span class="w"> </span><span class="n">line</span><span class="p" data-group-id="692">)</span><span class="w"> </span><span class="k" data-group-id="693">end</span><span class="p" data-group-id="694">)</span><span class="w"></span>
<span class="w">      </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n"><a class="guaxinim-source-link" href="https://hexdocs.pm/elixir/Enum.html#join/2">join</a></span><span class="p" data-group-id="695">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p" data-group-id="695">)</span><span class="w"></span>
<span class="w"></span>
<span class="w">    </span><span class="p" data-group-id="696">{</span><span class="bp">_</span><span class="p">,</span><span class="w"> </span><span class="n">line_numbers</span><span class="p" data-group-id="696">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n"><a class="guaxinim-source-link" href="https://hexdocs.pm/elixir/Enum.html#unzip/1">unzip</a></span><span class="p" data-group-id="697">(</span><span class="n">token_lines</span><span class="p" data-group-id="697">)</span><span class="w"></span>
<span class="w">    </span><span class="n">anchors</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w">      </span><span class="n">line_numbers</span><span class="w"></span>
<span class="w">      </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n"><a class="guaxinim-source-link" href="https://hexdocs.pm/elixir/Enum.html#map/2">map</a></span><span class="p" data-group-id="700">(</span><span class="k" data-group-id="699">fn</span><span class="w"> </span><span class="n">line_nr</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">           </span><span class="n"><a class="guaxinim-source-link" href="#L85">line_nr_anchor</a></span><span class="p" data-group-id="698">(</span><span class="n">line_nr</span><span class="p">,</span><span class="w"> </span><span class="n">anchor_padding</span><span class="p">,</span><span class="w"> </span><span class="n">line_numbers?</span><span class="p" data-group-id="698">)</span><span class="w"></span>
<span class="w">         </span><span class="k" data-group-id="699">end</span><span class="p" data-group-id="700">)</span><span class="w"></span>
<span class="w">      </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n"><a class="guaxinim-source-link" href="https://hexdocs.pm/elixir/Enum.html#join/2">join</a></span><span class="p" data-group-id="701">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p" data-group-id="701">)</span><span class="w"></span>
<span class="w"></span>
<span class="w">    </span><span class="p" data-group-id="702">{</span><span class="n">anchors</span><span class="p">,</span><span class="w"> </span><span class="n">code</span><span class="p" data-group-id="702">}</span><span class="w"></span>
<span class="w">  </span><span class="k" data-group-id="703">end</span><span class="w"></span>
<span class="k" data-group-id="704">end</span></pre>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>
        </div>
      </div>
    </div>

    <script src="../../_static/js/makeup.js"></script>
  </body>
</html>