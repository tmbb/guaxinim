<html>
  <head>
    <meta charset="UTF-8">
    <!-- Licensed under the Apache 2.0 License -->
    <link rel="stylesheet" type="text/css" href="../_static/fonts/open-sans/stylesheet.css" />
    <!-- Licensed under the SIL Open Font License -->
    <link rel="stylesheet" type="text/css" href="../_static/fonts/source-serif-pro/source-serif-pro.css" />
    <!-- Guzzler docs -->
    <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" />
    <!--
      <link rel="stylesheet" type="text/css" href="../_static/css/bootstrap.min.css" />
    -->
    <link rel="stylesheet" type="text/css" href="../_static/css/bootstrap-theme.min.css" />
    <!-- Guaxinim -->
    <link rel="stylesheet" type="text/css" href="../_static/css/theme.css" />

  </head>
  <body>
    <div class="container-wrapper">
      <div id="left-column">
        <div class="sphinxsidebar">
  <a href="#" class="text-logo">
    Guaxinim
  </a>
  <div class="sidebar-block">
    <div class="sidebar-wrapper">
      <h2>Table Of Contents</h2>
    </div>
    <div class="sidebar-toc">
      <ul class="current">
        
        
        <li class="toctree-l1">
          <a class="reference internal" href="..">
            <span class="glyphicon glyphicon-level-up"></span>
            &nbsp;
            <span class="sidebar-toc-level-up">../</span></a></li>
        
        
        
        <li class="toctree-l1">
          <a class="reference internal" href="internal">
            <span class="glyphicon glyphicon-folder-open"></span>
            &nbsp;
            <span class="sidebar-toc-directory">internal/</span></a></li>
        
        <li class="toctree-l1">
          <a class="reference internal" href="templates">
            <span class="glyphicon glyphicon-folder-open"></span>
            &nbsp;
            <span class="sidebar-toc-directory">templates/</span></a></li>
        
        <li class="toctree-l1">
          <a class="reference internal" href="utils">
            <span class="glyphicon glyphicon-folder-open"></span>
            &nbsp;
            <span class="sidebar-toc-directory">utils/</span></a></li>
        
        
        
        <li class="toctree-l1">
          <a class="reference internal" href="ast_inspector.ex.html">
            <span class="glyphicon glyphicon-file"></span>
            &nbsp;
            <span class="sidebar-toc-file">ast_inspector.ex</span></a></li>
        
        <li class="toctree-l1">
          <a class="reference internal" href="beam_inspector.ex.html">
            <span class="glyphicon glyphicon-file"></span>
            &nbsp;
            <span class="sidebar-toc-file">beam_inspector.ex</span></a></li>
        
        <li class="toctree-l1">
          <a class="reference internal" href="config.ex.html">
            <span class="glyphicon glyphicon-file"></span>
            &nbsp;
            <span class="sidebar-toc-file">config.ex</span></a></li>
        
        <li class="toctree-l1">
          <a class="reference internal" href="database.ex.html">
            <span class="glyphicon glyphicon-file"></span>
            &nbsp;
            <span class="sidebar-toc-file">database.ex</span></a></li>
        
      </ul>
    </div>
  </div>
</div>
      </div>

      <div id="right-column">
        <div class="document clearer body">
          <div class="guaxinim-codeblock">
  <table>
    <tbody>
      <tr>
        <td>
          <div class="line-anchors">
            <pre><a id="L1"></a><a href="#L1"> 1</a>
<a id="L2"></a><a href="#L2"> 2</a>
<a id="L3"></a><a href="#L3"> 3</a>
<a id="L4"></a><a href="#L4"> 4</a>
<a id="L5"></a><a href="#L5"> 5</a>
<a id="L6"></a><a href="#L6"> 6</a>
<a id="L7"></a><a href="#L7"> 7</a>
<a id="L8"></a><a href="#L8"> 8</a>
<a id="L9"></a><a href="#L9"> 9</a>
<a id="L10"></a><a href="#L10">10</a>
<a id="L11"></a><a href="#L11">11</a>
<a id="L12"></a><a href="#L12">12</a>
<a id="L13"></a><a href="#L13">13</a>
<a id="L14"></a><a href="#L14">14</a>
<a id="L15"></a><a href="#L15">15</a>
<a id="L16"></a><a href="#L16">16</a>
<a id="L17"></a><a href="#L17">17</a>
<a id="L18"></a><a href="#L18">18</a>
<a id="L19"></a><a href="#L19">19</a>
<a id="L20"></a><a href="#L20">20</a>
<a id="L21"></a><a href="#L21">21</a>
<a id="L22"></a><a href="#L22">22</a>
<a id="L23"></a><a href="#L23">23</a>
<a id="L24"></a><a href="#L24">24</a>
<a id="L25"></a><a href="#L25">25</a>
<a id="L26"></a><a href="#L26">26</a>
<a id="L27"></a><a href="#L27">27</a>
<a id="L28"></a><a href="#L28">28</a>
<a id="L29"></a><a href="#L29">29</a>
<a id="L30"></a><a href="#L30">30</a>
<a id="L31"></a><a href="#L31">31</a>
<a id="L32"></a><a href="#L32">32</a>
<a id="L33"></a><a href="#L33">33</a>
<a id="L34"></a><a href="#L34">34</a>
<a id="L35"></a><a href="#L35">35</a>
<a id="L36"></a><a href="#L36">36</a>
<a id="L37"></a><a href="#L37">37</a>
<a id="L38"></a><a href="#L38">38</a>
<a id="L39"></a><a href="#L39">39</a>
<a id="L40"></a><a href="#L40">40</a>
<a id="L41"></a><a href="#L41">41</a>
<a id="L42"></a><a href="#L42">42</a>
<a id="L43"></a><a href="#L43">43</a>
<a id="L44"></a><a href="#L44">44</a></pre>
          </div>
        </td>
        <td class="right-side guaxinim-code">
          <div class="nohighlight makeup code">
            <pre><span class="kd">defmodule</span><span class="w"> </span><span class="nc">Guaxinim.AstInspector</span><span class="w"> </span><span class="k" data-group-id="1808">do</span><span class="w"></span>
<span class="w">  </span><span class="kd">defp</span><span class="w"> </span><span class="n">functions_called_pre_walk</span><span class="p" data-group-id="1765">(</span><span class="p" data-group-id="1764">{</span><span class="n">f</span><span class="p">,</span><span class="w"> </span><span class="n">location</span><span class="p">,</span><span class="w"> </span><span class="n">args</span><span class="p" data-group-id="1764">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ast_node</span><span class="p">,</span><span class="w"> </span><span class="n">acc</span><span class="p" data-group-id="1765">)</span><span class="w"></span>
<span class="w">      </span><span class="ow">when</span><span class="w"> </span><span class="n"><a class="guaxinim-source-link" href="http://erlang.org/doc/man/erlang.html#is_atom-1">is_atom</a></span><span class="p" data-group-id="1766">(</span><span class="n">f</span><span class="p" data-group-id="1766">)</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n"><a class="guaxinim-source-link" href="http://erlang.org/doc/man/erlang.html#is_list-1">is_list</a></span><span class="p" data-group-id="1767">(</span><span class="n">args</span><span class="p" data-group-id="1767">)</span><span class="w"> </span><span class="k" data-group-id="1773">do</span><span class="w"></span>
<span class="w">    </span><span class="p" data-group-id="1772">{</span><span class="n">ast_node</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="1771">[</span><span class="p" data-group-id="1770">{</span><span class="p" data-group-id="1769">{</span><span class="n">f</span><span class="p">,</span><span class="w"> </span><span class="n"><a class="guaxinim-source-link" href="http://erlang.org/doc/man/erlang.html#length-1">length</a></span><span class="p" data-group-id="1768">(</span><span class="n">args</span><span class="p" data-group-id="1768">)</span><span class="p" data-group-id="1769">}</span><span class="p">,</span><span class="w"> </span><span class="n">location</span><span class="w"> </span><span class="p" data-group-id="1770">}</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">acc</span><span class="p" data-group-id="1771">]</span><span class="p" data-group-id="1772">}</span><span class="w"></span>
<span class="w">  </span><span class="k" data-group-id="1773">end</span><span class="w"></span>
<span class="w">  </span><span class="kd">defp</span><span class="w"> </span><span class="n">functions_called_pre_walk</span><span class="p" data-group-id="1774">(</span><span class="n">ast_node</span><span class="p">,</span><span class="w"> </span><span class="n">acc</span><span class="p" data-group-id="1774">)</span><span class="p">,</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1775">{</span><span class="n">ast_node</span><span class="p">,</span><span class="w"> </span><span class="n">acc</span><span class="p" data-group-id="1775">}</span><span class="w"></span>
<span class="w"></span>
<span class="w">  </span><span class="kd">defp</span><span class="w"> </span><span class="n">post_walk</span><span class="p" data-group-id="1776">(</span><span class="n">ast_node</span><span class="p">,</span><span class="w"> </span><span class="n">acc</span><span class="p" data-group-id="1776">)</span><span class="p">,</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1777">{</span><span class="n">ast_node</span><span class="p">,</span><span class="w"> </span><span class="n">acc</span><span class="p" data-group-id="1777">}</span><span class="w"></span>
<span class="w"></span>
<span class="w">  </span><span class="kd">def</span><span class="w"> </span><span class="nf">functions_called_by</span><span class="p" data-group-id="1778">(</span><span class="n">definitions</span><span class="p">,</span><span class="w"> </span><span class="n">heads</span><span class="p" data-group-id="1778">)</span><span class="w"> </span><span class="k" data-group-id="1787">do</span><span class="w"></span>
<span class="w">    </span><span class="n">calls_per_head</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w">      </span><span class="k">for</span><span class="w"> </span><span class="n">head</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">heads</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="p" data-group-id="1779">{</span><span class="n">_loc</span><span class="p">,</span><span class="w"> </span><span class="n">_args</span><span class="p">,</span><span class="w"> </span><span class="n">_context</span><span class="p">,</span><span class="w"> </span><span class="n">ast</span><span class="p" data-group-id="1779">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">head</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="p" data-group-id="1780">{</span><span class="bp">_</span><span class="p">,</span><span class="w"> </span><span class="n">calls</span><span class="p" data-group-id="1780">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Macro</span><span class="o">.</span><span class="n"><a class="guaxinim-source-link" href="https://hexdocs.pm/elixir/Macro.html#traverse/4">traverse</a></span><span class="p" data-group-id="1782">(</span><span class="n">ast</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="1781">[]</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">functions_called_pre_walk</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">post_walk</span><span class="o">/</span><span class="mi">2</span><span class="p" data-group-id="1782">)</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="n">calls</span><span class="w"></span>
<span class="w"></span>
<span class="w">    </span><span class="n">calls_per_head</span><span class="w"></span>
<span class="w">    </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">List</span><span class="o">.</span><span class="n"><a class="guaxinim-source-link" href="https://hexdocs.pm/elixir/List.html#flatten/1">flatten</a></span><span class="w"></span>
<span class="w">    </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n"><a class="guaxinim-source-link" href="https://hexdocs.pm/elixir/Enum.html#filter/2">filter</a></span><span class="p" data-group-id="1786">(</span><span class="k" data-group-id="1785">fn</span><span class="w"> </span><span class="p" data-group-id="1783">{</span><span class="n">fun_arity</span><span class="p">,</span><span class="w"> </span><span class="bp">_</span><span class="p" data-group-id="1783">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">MapSet</span><span class="o">.</span><span class="n"><a class="guaxinim-source-link" href="https://hexdocs.pm/elixir/MapSet.html#member?/2">member?</a></span><span class="p" data-group-id="1784">(</span><span class="n">definitions</span><span class="p">,</span><span class="w"> </span><span class="n">fun_arity</span><span class="p" data-group-id="1784">)</span><span class="w"> </span><span class="k" data-group-id="1785">end</span><span class="p" data-group-id="1786">)</span><span class="w"></span>
<span class="w">  </span><span class="k" data-group-id="1787">end</span><span class="w"></span>
<span class="w"></span>
<span class="w">  </span><span class="kd">defp</span><span class="w"> </span><span class="n">aliases_to_string</span><span class="p" data-group-id="1788">(</span><span class="n">aliases</span><span class="p" data-group-id="1788">)</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="n">aliases</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n"><a class="guaxinim-source-link" href="https://hexdocs.pm/elixir/Enum.html#map/2">map</a></span><span class="p" data-group-id="1789">(</span><span class="o">&amp;</span><span class="nc">Atom</span><span class="o">.</span><span class="n"><a class="guaxinim-source-link" href="https://hexdocs.pm/elixir/Atom.html#to_string/1">to_string</a></span><span class="o">/</span><span class="mi">1</span><span class="p" data-group-id="1789">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n"><a class="guaxinim-source-link" href="https://hexdocs.pm/elixir/Enum.html#join/2">join</a></span><span class="p" data-group-id="1790">(</span><span class="s2">&quot;.&quot;</span><span class="p" data-group-id="1790">)</span><span class="w"></span>
<span class="w"></span>
<span class="w">  </span><span class="kd">defp</span><span class="w"> </span><span class="n">module_reference_pre_walk</span><span class="p" data-group-id="1795">(</span><span class="w"></span>
<span class="w">      </span><span class="p" data-group-id="1794">{</span><span class="n">macro</span><span class="p">,</span><span class="w"></span>
<span class="w">       </span><span class="bp">_</span><span class="p">,</span><span class="w"></span>
<span class="w">       </span><span class="p" data-group-id="1793">[</span><span class="p" data-group-id="1792">{</span><span class="p" data-group-id="1791">{</span><span class="ss">:require</span><span class="p">,</span><span class="w"> </span><span class="bp">_</span><span class="p">,</span><span class="w"> </span><span class="n">prefix_aliases</span><span class="p" data-group-id="1791">}</span><span class="p">,</span><span class="w"></span>
<span class="w">         </span><span class="bp">_</span><span class="p">,</span><span class="w"></span>
<span class="w">         </span><span class="n">suffix_aliases</span><span class="p" data-group-id="1792">}</span><span class="p" data-group-id="1793">]</span><span class="p" data-group-id="1794">}</span><span class="p">,</span><span class="w"> </span><span class="n">acc</span><span class="p" data-group-id="1795">)</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">macro</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="ss">:require</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">macro</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="ss">:alias</span><span class="w"> </span><span class="k" data-group-id="1800">do</span><span class="w"></span>
<span class="w"></span>
<span class="w">    </span><span class="n">full_aliases</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="p" data-group-id="1796">{</span><span class="ss">:__aliases__</span><span class="p">,</span><span class="w"> </span><span class="n">meta</span><span class="p">,</span><span class="w"> </span><span class="n">aliases</span><span class="p" data-group-id="1796">}</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">suffix_aliases</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1798">{</span><span class="n"><a class="guaxinim-source-link" href="#L22">aliases_to_string</a></span><span class="p" data-group-id="1797">(</span><span class="n">prefix_aliases</span><span class="w"> </span><span class="o">++</span><span class="w"> </span><span class="n">aliases</span><span class="p" data-group-id="1797">)</span><span class="p">,</span><span class="w"> </span><span class="n">meta</span><span class="p" data-group-id="1798">}</span><span class="w"></span>
<span class="w"></span>
<span class="w">    </span><span class="p" data-group-id="1799">{</span><span class="no">nil</span><span class="p">,</span><span class="w"> </span><span class="n">full_aliases</span><span class="w"> </span><span class="o">++</span><span class="w"> </span><span class="n">acc</span><span class="p" data-group-id="1799">}</span><span class="w"></span>
<span class="w">  </span><span class="k" data-group-id="1800">end</span><span class="w"></span>
<span class="w"></span>
<span class="w">  </span><span class="kd">defp</span><span class="w"> </span><span class="n">module_reference_pre_walk</span><span class="p" data-group-id="1801">(</span><span class="n">ast_node</span><span class="p">,</span><span class="w"> </span><span class="n">acc</span><span class="p" data-group-id="1801">)</span><span class="p">,</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1802">{</span><span class="n">ast_node</span><span class="p">,</span><span class="w"> </span><span class="n">acc</span><span class="p" data-group-id="1802">}</span><span class="w"></span>
<span class="w"></span>
<span class="w">  </span><span class="kd">def</span><span class="w"> </span><span class="nf">module_imports_and_etc</span><span class="p" data-group-id="1803">(</span><span class="n">file_ast</span><span class="p" data-group-id="1803">)</span><span class="w"> </span><span class="k" data-group-id="1807">do</span><span class="w"></span>
<span class="w">    </span><span class="p" data-group-id="1804">{</span><span class="bp">_</span><span class="p">,</span><span class="w"> </span><span class="n">references</span><span class="p" data-group-id="1804">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Macro</span><span class="o">.</span><span class="n"><a class="guaxinim-source-link" href="https://hexdocs.pm/elixir/Macro.html#traverse/4">traverse</a></span><span class="p" data-group-id="1806">(</span><span class="n">file_ast</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="1805">[]</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">module_reference_pre_walk</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">post_walk</span><span class="o">/</span><span class="mi">2</span><span class="p" data-group-id="1806">)</span><span class="w"></span>
<span class="w">    </span><span class="n">references</span><span class="w"></span>
<span class="w">  </span><span class="k" data-group-id="1807">end</span><span class="w"></span>
<span class="k" data-group-id="1808">end</span></pre>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>
        </div>
      </div>
    </div>
  </body>
</html>